!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){},function(t,e,i){"use strict";i.r(e);class s{constructor(t){this.state=t}static extractIdVideo(t){return t.items.map(t=>t.id.videoId)}async getListVideo(t){try{const e=await fetch(t).then(t=>{if(t.ok)return t;throw new Error("Network response was not ok.")}),i=await e.json();return{arrListIdVideo:s.extractIdVideo(i),dataVideo:i}}catch(t){console.log("have mistake getListVideo in model"+t.message)}}async getMetrics(t){try{const e=await fetch(t).then(t=>{if(t.ok)return t;throw new Error("Network response was not ok.")});return await e.json()}catch(t){console.log("have mistake getMetrics in model"+t.message)}}async getClipNames(t){const e=await fetch(t),i=await e.json();return s.extractClipNames(i)}}var n=class{constructor(){this.count=1,this.page=1}showControlButt(){a("prev"),a("next")}hideControlBut(){o("prev"),o("next")}start(){!function(){let t=document.createElement("div");t.classList.add("wrapper");let e=document.createElement("div");e.classList.add("wrapper-search-input");let i=document.createElement("label");i.setAttribute("for","search-input"),i.classList.add("wrapper-search-label");let s=document.createElement("input");s.setAttribute("id","search-input"),s.setAttribute("type","text"),s.setAttribute("placeholder","   search word and found video in youtube"),s.classList.add("input-elem");let n=document.createElement("input");n.setAttribute("id","search-button"),n.setAttribute("type","button"),n.setAttribute("value","search"),n.classList.add("search-button"),i.appendChild(s),i.appendChild(n),e.appendChild(i),t.appendChild(e);let a=document.createElement("ul");a.classList.add("video-list"),a.setAttribute("id","video-list"),t.appendChild(a);let o=document.createElement("div");o.classList.add("navigator"),t.appendChild(o);let r=document.createElement("div");r.classList.add("error"),t.appendChild(r);let l=document.createElement("div");l.classList.add("loading"),t.appendChild(l);let d=document.createElement("div");d.setAttribute("id","button-conteiner"),d.classList.add("button-conteiner"),document.body.appendChild(t),document.body.appendChild(d)}(),document.body.style.backgroundColor="lightgray",this.showControlButt(),this.hideControlBut()}render(t){!function(t){let e=document.querySelector(".video-list");t.items.forEach(t=>{let i=document.createElement("li");i.classList.add("item-video"),i.style.width="300px",i.style.marginLeft="15px",i.style.marginRight="15px";let s=document.createElement("div");s.classList.add("item-video-conteiner"),i.appendChild(s);let n=document.createElement("img");n.setAttribute("src",t.snippet.thumbnails.high.url),s.appendChild(n);let a=document.createElement("div");a.classList.add("video-title"),s.appendChild(a);let o=document.createElement("a");o.classList.add("video-link"),o.setAttribute("href",`https://www.youtube.com/watch?v=${t.id}`),o.innerText=`${t.snippet.title}`,o.setAttribute("target","_blank"),a.appendChild(o);let r=document.createElement("div");r.classList.add("video-info"),s.appendChild(r);let l=document.createElement("div");l.classList.add("video-info-wrapper"),r.appendChild(l);let d=document.createElement("div");d.classList.add("video-channel-title");let c=document.createElement("span");c.innerText=`${t.snippet.channelTitle}`;let u=document.createElement("img");u.setAttribute("src","../assets/png/user.png"),d.appendChild(u),d.appendChild(c),l.appendChild(d);let h=document.createElement("div");h.classList.add("video-date");let m=document.createElement("span");m.innerText=`${t.snippet.publishedAt.substr(0,10)}`;let p=document.createElement("img");p.setAttribute("src","../assets/png/calendar.png"),h.appendChild(p),h.appendChild(m),l.appendChild(h);let g=document.createElement("div");g.classList.add("video-count-view");let v=document.createElement("span");v.innerText=`${t.statistics.viewCount}`;let w=document.createElement("img");w.setAttribute("src","../assets/png/eye.png"),g.appendChild(w),g.appendChild(v),l.appendChild(g);let y=document.createElement("div");y.classList.add("video-description"),y.innerText=`${t.snippet.description}`,r.appendChild(y),e.appendChild(i)})}(t)}onFocus(){let t=document.getElementById("search-input");t.setAttribute("placeholder",""),t.style.backgroundColor="rgba(255, 0, 255, 0.3)"}onBlur(){document.getElementById("search-input").style.backgroundColor=""}};function a(t){let e=document.getElementById(`${t}`);if(e)e.style.display="";else{let e=document.getElementById("button-conteiner"),i=document.createElement("input");i.setAttribute("type","button"),i.setAttribute("value",`${t} page`),i.setAttribute("id",`${t}`),e.appendChild(i)}}function o(t){document.getElementById(`${t}`).style.display="none"}i(0);var r=n;function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t){}function c(){let t=document.documentElement.clientWidth,e=document.querySelector(".item-video").getBoundingClientRect();t>1e3?this.countItemOnPage=Math.floor(t/(e.width+30)):t<1e3&&(this.countItemOnPage=Math.floor(t/(e.width+30)))}function u(){let t=document.querySelector(".item-video").getBoundingClientRect();this.DOMConteinerItems=document.querySelector(".video-list"),this.DOMConteinerItems.style.overflow="hidden",this.sizeFrame=this.DOMConteinerItems.style.width=(t.width+30)*this.countItemOnPage,this.DOMConteinerItems.style.width=this.sizeFrame+"px"}(new class{constructor(){l(this,"onClickButtSearch",async()=>{let t=document.getElementById("search-input");this.searchWord=t.value,await this.makeRequest(),0==this.initReact&&(await c.call(this),await u.call(this),this.initReact=!0),await this.view.showControlButt()}),l(this,"onKeyPress",async t=>{13===t.keyCode&&(this.searchWord=t.target.value,await this.makeRequest(),0==this.initReact&&(await c.call(this),await u.call(this),this.initReact=!0),await this.view.showControlButt()),46!==t.keyCode&&8!==t.keyCode||(this.DOMConteinerItems.innerHTML="",this.totalCountItem=0,this.currPage=1,this.view.hideControlBut())}),l(this,"prevButt",async()=>{await u.call(this),await function(){1!==this.currPage&&(this.DOMConteinerItems.scrollBy({behavior:"smooth",top:0,left:-this.sizeFrame}),this.currPage-=1)}.call(this)}),l(this,"nextButt",async()=>{this.currPage*(this.countItemOnPage+1)>this.totalCountItem&&await this.makeRequest(),await u.call(this),await function(){this.DOMConteinerItems.scrollBy({behavior:"smooth",top:0,left:this.sizeFrame}),this.currPage+=1}.call(this)}),l(this,"onMouseDown",t=>{this.imageState.isDown=!0,this.imageState.listElem.classList.add("active"),this.imageState.startX=t.pageX-this.imageState.listElem.offsetLeft,this.imageState.scrollLeft=this.imageState.listElem.scrollLeft,this.imageState.myStartX=t.pageX}),l(this,"onMouseLeave",t=>{this.imageState.isDown=!1,this.imageState.listElem.classList.remove("active")}),l(this,"onMouseUp",async t=>{if(this.imageState.isDown){this.currPage*(this.countItemOnPage+1)>this.totalCountItem&&await this.makeRequest(),this.imageState.endX=t.pageX;let e=this.imageState.myStartX-this.imageState.endX;if(1===this.currPage)this.DOMConteinerItems.scrollTo({behavior:"smooth",top:0,left:this.sizeFrame}),this.currPage+=1;else if(e>0){let t=this.sizeFrame-(this.DOMConteinerItems.scrollLeft-(this.currPage-1)*this.sizeFrame);this.DOMConteinerItems.scrollBy({behavior:"smooth",top:0,left:t}),this.currPage+=1}else e<0&&this.currPage>1&&(this.currPage-=1,this.DOMConteinerItems.scrollLeft,this.currPage,this.sizeFrame,this.DOMConteinerItems.scrollTo({behavior:"smooth",top:0,left:this.sizeFrame*(this.currPage-1)}));this.imageState.isDown=!1,this.imageState.listElem.classList.remove("active")}}),l(this,"onMouseMove",t=>{if(!this.imageState.isDown)return;t.preventDefault();const e=2*(t.pageX-this.imageState.listElem.offsetLeft-this.imageState.startX);this.imageState.listElem.scrollLeft=this.imageState.scrollLeft-e,this.test=this.imageState.scrollLeft-e}),this.state={key:"AIzaSyDewtox-LQbrmW1r3q9pRZMrLEfoCvL9u8"},this.model=new s,this.view=new r,this.countRequest=1,this.pageToken="",this.searchWord="",this.imageState={isDown:!1,startX:"",myStartX:"",endX:"",scrollLeft:"",listElem:""},this.initReact=!1,this.itemInRequest=15,this.currPage=1,this.countItemOnPage="",this.sizeFrame="",this.totalCountItem=0,this.mouseMove={startPos:"",endPos:""},this.DOMConteinerItems="",this.test=""}async start(){this.view.start(),function(){let t=document.getElementById("search-input"),e=document.getElementById("search-button");t.addEventListener("keydown",this.onKeyPress),t.addEventListener("focus",this.view.onFocus),t.addEventListener("blur",this.view.onBlur),e.addEventListener("click",this.onClickButtSearch);let i=document.getElementById("prev"),s=document.getElementById("next");i.addEventListener("click",this.prevButt),s.addEventListener("click",this.nextButt);let n=document.querySelector(".video-list");this.imageState.listElem=n,n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseleave",this.onMouseLeave),document.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",d)}.call(this)}async makeRequest(){let t=function(t,e,i,s){let n;return n=1===i?`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=15&key=${e}&q=${t}`:`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=15&key=${e}&q=${t}&pageToken=${s}`}(this.searchWord,this.state.key,this.countRequest++,this.pageToken);const{arrListIdVideo:e,dataVideo:i}=await this.model.getListVideo(t);this.totalCountItem+=i.items.length,(this.countRequest=2)&&(this.pageToken=i.nextPageToken);const s=(n=e,`https://www.googleapis.com/youtube/v3/videos?key=${this.state.key}&part=snippet,statistics&id=${n.join(",")}`);var n;const a=await this.model.getMetrics(s);this.showVideo(a)}showVideo(t){this.view.render(t),this.infiniteLoad()}infiniteLoad(){this.imageState.listElem.addEventListener("scroll",this.onScroll)}translateItemVideo(){let t=document.querySelector(".video-list"),e=t.getBoundingClientRect();t.style.right=`${e.left+300}px`}}).start()}]);
